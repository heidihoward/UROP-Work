\documentclass[12pt,a4paper,oneside]{article}
\begin{document}
\title{Testing performance of tools for online anonymity }
\author{Heidi Howard}
\date{\today}
\maketitle
\tableofcontents

\begin{abstract}
The following document is a look back at the ideas and concepts that I've explored for the first 3 weeks of the summer reasearch project. The focus of my reading has been the area of anonymity and security in computer networking. I intend to use this as reference in future to review the technolgolies explored and see if any can be apply in Signposts, a system for enabling end to end connectivity between modern devices on the edge of the internet, seperated by a middleware. I've conducted my reasearch over the last few weeks by finding software that aims to provide users with anonymity online, tested out the software and looked at the thoery behind how the software claims to provide anonymity for the user.
\end{abstract}


\section{Aims and Objectives}
My overall aim of the first 3 weeks of the project was to gain skills and learn some of the fundemental idea behind the internet and the issues created by the modern internet in the current information age. I begin by exploring why a user would need anonymity online and then I when on to look at how this can be achieved. The context of anonymity that I have considered is that of a typically user in the UK, who does want to be tracked by website as they browse the internet and wants to make secure use of unsecure Wi-FI connections. I've choose not to consider the anonymity that might be required by a individual in a polically suppressed country or a corperation commiting esbonatge.

Anonymity online for the "everyday" user has hit the headlines lately since Google released its new privacy policy and tools such as Collusion highlighted to users how many websites track users across the web. One of the first steps I took was to install Collusion and took a look at which sites I reguarly visited, used cookies to track me across the web. Next I took at look at how anonymity is defined and the criteria against which I intended to evaluate tools for online anonymity.


\subsection{Types of Anonymity}
The two types of anonymity that I will be considering are:
\begin{itemize}
\item hide identify for web hosts including your locations, IP address, browsing habits, MAC address, facebook username etc..
\item browsing from man-in-the-middle dispute use of unsecure Wi-Fi e.g. in cafes 
\end{itemize}

\subsection{Terminology}

\begin{itemize}
\item Anonymity - a subject is not identifiable within a set of subjects
\item Pseudonymity - use of pseudoyms as identifiers
\item Unlinkability - inability to distinguish wheather to actions are related or not
\end{itemize}

The definition of anonymity above makes an important distingtion. Anonymity doesn't nessacary mean that a subject is not indeifiable within a whole population of subject instead it means that the subject is not identifiable within a set of subject. With systems for anonymity such as Tor, the set of subjects is the set of tor users. The larger the set of subjects, the better the anonymity. So the more indivudals that use a typically anonymity system, the better anonymity is provided to each user. 

As the size of the set of subjects is proportional to the anonymity provided, if an individual was attempting to reduce anonymity, they would do so by reducing the size of the set of subjects. For example if I'm a website trying to reduce your anonymity and your an individual attempting to protect your identify by using Tor, I can reduced the set of subjects from all Tor users to all Tor users using the same edition of the same browser as you by recording your browser edition.

\subsection{Difference between Anonymity and Security}
Before continueing I think its important to make a distinction between Anonymity and Security. Tor provides anonymity but not security whereas OpenVPN provides security but not anonymity. Security dosenot imply anonymity and vise versa.

\subsection{Evaluation Criteria for Anonymity Tools}
I will evaluate a range of tools for online anonymity aganist the following criteria:
\begin{itemize}
\item	1. Ease of install
\item	2. Impact on network performance
\item	3. Degree to which aims are achieved 
\item	4. Useability
\item	5. Side Effects (positive + negative)
\end{itemize}

\subsection{Scope}
\begin{itemize}
\item Consider a range of tools from simple tools such as broswer plugins to more complex solution such as VPN's
\item Only consider open source tools that are avaliable on linux. %or andriod (don't need to consider mac or windows)
%TODO consider if the andriod references should be removed
\item Only use hardware set out below
\item Only use the networks set out below
\end{itemize}

\section{Skills}
To be of use to Signposts, I need to develop the following skills and understand of the following cocepts, accompianting each skills/concept is how I hope to achieve it
\begin{itemize}
\item Unix Commend line - by using command line where possiblie instead of GUI's, learning commend line basics such as changing directory, moving a file/directory, returning current directory, installing applications from the ubuntu repositories, switching to sudo, installing from tar ball, extracting from a tar file, using ssh, git basics, getting help/manuals, pipes, grep, list processes, list files, changing file premissions, creating directories/empty files, removing files/directories, removing applications installed from ubuntu repositories
\item git and Github - the difference between stages and commited files, how to use git config to change username, email, text editor and difference tool, get help with git, initializing a new repository, cloning an existing repository, checking the status of a file in the working directory, tracking new files, staging files, ignoring files, committing files, removing files, moving files, viewing commit history, adding github remotes, showing remotes, pulling and pushing to remotes
\item How DNS works - using dig and host, watching DNS queries on WireShark, difference between local DNS server, root DNS server, Top-level domain server, Authoritative DNS server, difference between iterative and recusive queries, DNS caching, Dynamic DNS
\item Types of DNS records - type A, type NS, type CNAME and type MX, DNS message format, 
\item Difference between DNS and DNSSEC - authentication via a chain of trust, new record types added to DNS
% \item Analysis experimental data
\item Proxies and VPNs - how proxies provide security, role of web proxies, reverse proxies and forward proxies, caching proxy, DNS proxy, setting up an encryped proxy 
\item SSH
\item Capabilities of Firefox Addons/Extensions
\item Andriod Platform
\item NATs and workarounds
\item LaTeX
\item SSL 
\item Packet Struture 
\end{itemize}


\section{Hardware} 
Below is a description of the hardware that I used over the course of the last few weeks. Initally I planed to make extensive use of a raspberry pi as an always on server but due to the additional complexity I had to install Ubuntu on my desktop and then intended to use this as a server. This allowed me to use the same OS for both the client and server but I then had to adjust my plans due to complexity introduced by college firewalls and NAT boxes so I then desiced to make use of a virtual machine on the Amazon compute cloud, this provided me with a public DNS name and a public IP, which make it much easier to address the machine. I used amazon's web interface to start and stop the machine and then I controlled the the machine remotely by SSH, this allowed me to have access to two machines at once so I can send communication between them

\subsection{Laptop}
System Information
\begin{itemize}
\item OS: Ubuntu 12.04 LTS
\item Memory: 3.7 GiB
\item Intel Core i3
\item 64 bit
\item Disk: 25.9 GB
% the lack of disk shape is a serious problem with my laptop that needs to be dealt with at sometime, currently around 4 GB of disk space in Ubuntu partition, plenty of space in windows partition
% this can be resolved by running ubuntu of a live CD/USB and using Gparted to reduce windows partitions and growth ubuntu partition
% broken touchpad also
\end{itemize}

\subsection{Desktop}
System Information
\begin{itemize}
\item OS: Ubuntu 12.04 LTS
\item Memory: 3.9 GiB
\item Intel Core i5
\item 32 bit
%not sure why this is 32 bit but it is
\item Disk: 238.1 GB
\end{itemize}

% \subsection{Raspberry Pi}
% I may make use of the raspberry pi in my investigations. The System Information is
% \begin{itemize}
% \item Model B
% \item OS: Debian Wheezy
% \item Memory: 256 MB
% \item 32 bit
% \item SD Card: 4 GB
% \end{itemize}
%current issue is the lack of a conpatable wireless adaptor so networking testing is limited to ethernet

% \subsection{Andriod Phone} 
% The andriod phone that I am choosing to work with, is as follows:
% \begin{itemize}
% \item Model: HTC Dream
% \item Android Version: 2.2.1
% \item Mod Version CyanogenMod-6.1.1-DS
% \item Biuld Number FRG83
% \end{itemize}



%\section{Avaliable Networks}
%Below are the details of the avalible networks 

%TO DO add some information on the avaliable networks, e.g. sample bandwidth and reliablity 
%\subsection{College ethenet (possible issues with the firewall/NAT) (typically for the server)}
%\subsection{wgb Wi-Fi (typically for the client)}
%\subsection{Lapwing (typically for the client)}
%\subsection{Eduroam (typically for the cleint)}
% \subsection{3G (possiblity for the android phone)}
%this is unlikely to be used due to cost implications

\section{Software/Tools Used Investigations}
Below is an outline of the software tools that I've used to analysis the tools for anonymity. Like the tools for anonymity, all tools listed here are open source and avalible on Linux. %or Android.

\subsection{Firefox browser}
The browser that I am using is Mozilla Firefox 13.0 (for Ubuntu canonical 1.0). I've choosen to use this browser over Google Chrome as some people desire anonymity from Google so use of there browser may complicate the issue. I will be considering a range of firefox addons which aim to improve anonymity. There are also some firefox setting tweeks which can aid in protecting an individuals identity.

\subsection{

\subsubsection{Building my own Firefox Add-on}

%http://lifehacker.com/264490/how-to-build-a-firefox-extension

Later on, I hope to test how the anonynity tools that I've investigated can be integrated with Signposts. A useful why to test this is to build my own Firefox Add-on. This will be particularly useful if it is possible to biuld a firefox Add-on that I can then go onto use to control other Firefox Add-ons such as NoScript or the Project Tor Button.

% Plan to work through https://developer.mozilla.org/en/XUL_School

\subsection{Traceroute}
%TODO coplete info on Traceroute
\subsection{Wireshark}
%TODO complete info on Wireshark
\subsection{Iperf}
The suggest tool for my investigations is iperf. Iperf is a netwrok testing tool that measures stats on the network performace of TCP and UDP data streams.  When testing UDP capacity Iperf allows the user to specify the datagram size so I will need to decide a suitable size. 

Jperf is a GUI for Iperf which is written in Java but I have choosen not to use this as I will be trying to automate my tests using a unix script and I hope to improve my knowledge of unix commend line.

Iperf has a client and server functionality to measure network performance between two ends either unidiectionally or bi-directionally. This means I need two computers to run my tests. One will be my desktop in my college room and the other will be my laptop in the computer labs. I intend to make the following measurements:
\begin{itemize}
\item Latency - measured using ping
\item Jitter - measured using Iperf UDP
\item Datagram Loss - measured using Iperf UDP
\item Bandwidth - measured using Iperf TCP
\end{itemize}

But Tor (with I am currently testing) only supports TCP so it will not support ping or UDP
%stuck here ??


\subsection{Dig and Host}
dig and host are DNS lookup utilities that you can call from the Unix terminal
\subsection{Octave}
%TODO complete info on Octave

\subsection{CyanogenMod}
%TODO complete info on CyanogenMod

\subsection{Iodine ?}
%TODO complete info on iodine


\section{Project Tor (Qualative Anaylsis)}

%what is TOR and how does it work ?
TOR, the ancroym for The Onion Rounter is a system designed to provide individuals with anonmity online. Tor works by routing internet traffic through a network of server to conceal the user's location and usage information. 
%installation focusing on browser bundle
% possiblity try tor on android
I am going to focus my investigations on the Tor Browser Bundle. The Browser bundle lets you run Tor directly of a USB flash drive without installation and includes a pre-configured firefox browser which further aims to protect the users identify by:
\begin{itemize}
\item ensuring that the browser to properly configured to send their traffic through Tor
\item blocking browser plugins as they can be manipulated to reveal your IP address 
%how can they be manipulated to reveal IP address
%case study: you can't use youtube with out plugins but there is an opt in trial of HTML5 which can potential surcomvent this www.youtube.com/html5
\item uses HTTPS Everywhere to force HTTPS encryption on major websites that support it
%case study: HTTPS everywhere is a Firefox/Chrome extension produced by the electronic frontier foundation can be found at www.eff.org/https-everywhere
%case study: use of firefox mean that it includes the Site Identify Button support.mozilla.org/en-US/kb/how-do-i-tell-if-my-connection-is-secure
\item warning the user before allowing them to open documents that are handled by external applications as this can reveal there non-Tor IP address
%case study: may be try out tails tails.boum.org
%case study: maybe look at why your should use bittorrent over tor blog.torproject.org/blog/bittorrent-over-tor-isnt-good-idea

%case study: using a Tor bridge relay rather than connecting directly to public tor network
%case study: other tor related projects www.torproject.org/getinvolved/volunteer.html.en#Documentation
\end{itemize}

The TOR browser bundle includes Vidalia, a GUI for Tor that allows users start and stop tor, view a graphical representation of the current TOR network, switch to a new IP address, set up a relay and edit Tor's settings.

The homepage for the browser check.torproject.org confurms to the user that Tor is successfully working and returns to the user the current IP address that there network traffic appears to be coming from.

Looking at TOR from an alternative pospective, that of an adversary. An adversary may aim to do the following:
\begin{itemize}
\item Bypassing Tor - get the user to connect directly to an IP of an adversary's choosing
\item Correlation of Tor and Non-Tor Activity - detecting what a tor user did then not using tor
\item Identifying Tor Users - identifying the indivduals that use Tor
\item History Disclosure - the ability to quiery to see if an individual has visited particular sites previously
\item Identifying location - using information such as timezone to determine a individuals geographical location
\item Miscellaneous anonymity set reduction - Link activity to an particular individual using obscure information
\item History records / On-disk information - with physical access to a machine using caching and historical records to identify previous activity
\end{itemize}

An adversary can locate themselves where they have the best chance to attack, this could include as an exit node, upstream router, ad servers, hosting malicious websites, ISP or gain physical access. The Tor browser aims to protect against this forms of attack 
%much more could be added here, source is largely www.torproject.org/projects/torbrowser/design/

%useablilty 
%TODO this is a large section with a lot to do
%issues with TOR
%TODO this is also a large section with a lot to do, the speed data needs to be moved to quantative analysis
Once of the issues what I quickly found with Tor was the speed of my internet connection compared to when I was not using Tor. I therefore coolected some data on the speed of Tor vs Non Tor connections and looked into whether the speeds achieved were sufficient to use Tor for everyday browsing.  

To add context to the speeds which I am achieving I could investigate what speed are sufficient for different internet activities, but just because a speed is sufficient it don't mean that it means the users expectations. Instead I will consider the figures in the context of the UK's average broadband speeds. I will be using the data provided by "Wi-Fi in the Home - A Study into the Effect of the 'air Mile' on Consumer Boardband Performance" produced by Epitiro in 2011. Epitiro found that the average UK Wi-Fi download speed was 6.1 Mbps


\begin{table}[tbp]
\centering
\begin{tabular}{|c c|c c|}
	\hline
	\multicolumn{2}{|c|}{Tor} & \multicolumn{2}{|c|}{Non-Tor} \\
	\hline
	Download & Upload & Download & Upload \\
	\hline
	1282 & 697 & 9824 & 9170 \\
	1373 & 1316 & 9849 & 8200 \\
	1517 & 1807 & 8508 & 8273 \\
	\hline
	1782 & 483 & 2454 & 311 \\
	1455 & 497 & 2320 & 453 \\
	1349 & 458 & 1781 & 621 \\
	\hline
	
	

\end{tabular}
\caption{Comparing connection speeds acheived using Tor verse those achieved when not using Tor, all measurements given in Kbps}
\label{tab:my table on Tor connection speeds}
\end{table}



\section{Tor (Quantative Anaylsis)}

\section{Planning}
To begin with I'm collect data on the performace of Tor and the normal network performace for comparision. Later I intend to extend this to other solutions to analoy online. For now I am going to run all test on ubuntu on my laptop but later this can be extended to other platforms like android. 

THe plan for my initial tests is as follows:
\begin{itemize}
\item Each test will be run over UDP and then TCP
\item Each test will run for 24 hrs 
\item Each test will be run over Tor and without-Tor as a control
\item The reley on Tor needs to be regularly changed
\item The first network that I will run the test on is Edurom at WGB

\end{itemize}

%TODO Main Job for this week, use iperf and a bash script to collect this data, this is a very big job


\section{Privoxy with Hamachi (Qualative Anaylsis)}
Privoxy is a heavy costomizable non-caching web proxy. Privoxy can be used to conjection with Tor. Privoxy aims to allow user more fine-grained control over thier internet experience. Privoxy acts as an middleman between the browser and webservers. Privoxy requests objects on behalf of the browser

% Privoxy cor features include ad blocking, cookie management, ...

\subsection{Introduction}
To enable me to encrypt my web traffic when using public Wi-Fi regardless of wheather a website supports HTTPS, to prevent attacks like Firesheep. I am going to set up an encrypted web proxy between my desktop in my college room and my laptop in a coffee shop. 

The desktop in my room (the proxy) acts as a middleman between my laptop (the client) and the world wide web. This means that internet requests go from the client to the proxy and the proxy then executes that on the clients behalf and returns the result to the client. 

The encryption is set up between the client and the server, this means that the traffic from the cleint can't be intercepted by other users on the public Wi-Fi in the coffee shop. The encryption only takes place been the client and the server, not between the server and the world wide web. But this is not important since the connection from the server to the world wide web is more secure than that directly from the client using public Wi-Fi in a coffee shop

\subsection{The Plan}

For this experiment I will be making use the follow software:
\begin{itemize}
\item Hamachi - a cross-platform VPN server the gives encrypted access to my server from my client
\item Privoxy - A web proxy (as tested last week)
\end{itemize}

In over to do this experiment, I will need to IP address of my server. The server is a desktop in my college room and my college uses a NAT. So how can get the servers IP address if its behind a NAT ?

The university runs its own authorative DNS server, this maps domain names to each individuals computers. The domain name for my server is therefore:

hh360.pem.private.cam.ac.uk

I can use this domain name to refer to my server so that even if the IP address changes, I will still be able to access the server.

%im following the instruction on http://lifehacker.com/5763170/how-to-secure-and-encrypt-your-web-browsing-on-public-networks-with-hamachi-and-privoxy
% an alternative method is http://lifehacker.com/237227/geek-to-live--encrypt-your-web-browsing-session-with-an-ssh-socks-proxy

Now that I have the information that I need, I will:
\begin{itemize}
\item Install Hamachi on my server
\item Set a new private network
\item Install Hamachi on my client
\item Get IP address of client (for use in testing)
\item Join the newly created network
\item Install Privoxy on my server
\item Edit config.txt by changing listen-address to IP address created by Hamachi
\item edit firefox preference to using the Hamachi-powered server as a HTTP proxy on port 8118
\item Go to http://config.privoxy.org/ to check that privoxy
\item Using dig or host to perform a DNS query for the server IP address
\item Go to WhatIsMyIP.com and the IP address should be that of the server
\item Run a couple of quick speed tests whilst using the proxy
\item Turn off the proxy etain firefox, and go to WhatIsMyIP.com to get the IP address of the client again (compare to that found earlier)
\item Now that the proxy is off, run a couple of quick speed tests 
\item From the client, using nmap to check port scan the servereta
\end{itemize}

%TODO this needs to be completed

\subsection{Implementation}

\subsection{Conclusions and Results}
% how would you do this without the uni author DNS servers


\section{Using Dreamplug as a FreedomBox (Qualative Anaylsis)}

%using dreamplug as hardware
Globalscale's Dreamplug is an classic example of a Plug Computer, it sports a 1.2GHz ARM processor, 512MB of RAM, 1GB Storage as well as 2 ethernet port, SD card slot and Wi-Fi all running on 5V DC power. A plug computer is a small form factor computer often used as a server. Dreamplug has typical features of a Plug computer such as:

\begin{itemize}
\item low power consumption
\item small form factor
\item no video card
\item good connectivity
\end{itemize}

%what is a freedomBox 
Plug computer such as Dreamplug can be used as "FreedomBox". FreedomBoxes are personal home servers that aims to free individuals from centralised systems such as popular social networking sites and email servers and move forward to more distributed systems putting individuals in control of there own data and how its transmitted through the packaging of opensource software 

%potential future with raspberry piwww.torproject.org/projects/torbrowser/design/
In the future, new hardware such as the raspberry pi could be used as a freedom box, with a notably lower unit cost than hardware such as the Dreamplug.

\section{Firefox Addons (Qualative Anaylsis)}
%TODO testing done but there is not write up here yet 

\section{OpenVPN (Qualative Anaylsis)}
Firstly I'm going to look at using openVPN to set up a VPN between my android phone and laptop. To do this I will install openVPN on my laptop (as the server) and connect my andriod phone to the VPN (as the client). 

OpenVPN can be downloaded straight from ubuntu repositories. Next I need set up a public-key infrastructure (PKI) which will allow my cleint and server to identify and authontiate each other. The PKI conists of a public and private key pair for the server and another pair for the cleint and a CA cerificate and key wich is used to sign the server and cleints public and private key pair. 

To set up a CA and generate the keys and certificates
%stopped here due to technical problems with openVPN on andriod, gunna wait until i have an other laptop to use as a client
%TODO finish this section here 

\begin{thebibliography}

\bibitem{collusion}
Collusion Firefox Addon,  www.mozilla.org/en-US/collusion/

%http://www.painless-security.com/blog/2011/06/27/dream-plug
%http://www.youtube.com/watch?feature=player_embedded&v=8dMrI74Ti4M#!
%www.torproject.org/projects/torbrowser/design/
%TODO finish references collection and find some relavent papers

\end{thebibliography}

%andriod development  http://www.javacodegeeks.com/2011/06/android-game-development-tutorials.html
\end{document}


